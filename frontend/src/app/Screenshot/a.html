
"use client"
import axios from 'axios';
import { useEffect, useState } from 'react';
interface Photo {
  id: number;
  image: Buffer | null; // Adjust the type to allow null
}

const PhotoGallery: React.FC = () => {
  const [photos, setPhotos] = useState<Photo[]>([]);

  useEffect(() => {
    axios.get('http://localhost:8081/planTrip/getphoto')
      .then((response) => {
        console.log(response.data); // Log the response data
        setPhotos(response.data);
      })
      .catch((error) => {
        console.error('Error fetching photos:', error);
      });
  }, []);
  

  return (
    <div>
      <h1>Photo Gallery</h1>
      {photos.map((photo, index) => (
  <div key={index}>
    <h2>Photo {index}</h2>
    {photo.image && typeof photo.image === 'object' ? (
      <img
        src={`data:image/jpeg;base64,${Buffer.from(photo.image.data).toString('base64')}`}
        alt={`Photo ${index}`}
      />
    ) : photo.image instanceof Buffer ? (
      <img
        src={`data:image/jpeg;base64,${photo.image.toString('base64')}`}
        alt={`Photo ${index}`}
      />
    ) : (
      <p>No image available</p>
    )}
  </div>
))}


    </div>
  );
};

export default PhotoGallery;
